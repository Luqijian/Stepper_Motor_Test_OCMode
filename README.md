<!--
 * @Description: Universal Stepper Motor Test Toolkit (Output compare mode)
 * @Company: Optimus Prime, Inc.
 * @Author: Qijian Lu
 * @Date: 2021-03-23 16:57:10
 * @LastEditors: Qijian Lu
 * @LastEditTime: 2021-03-23 17:26:08
-->

# **通用脉冲式步进电机驱动器测试程序（输出比较模式）**

## **1.功能说明**
本程序用于测试脉冲驱动式步进电机驱动器功能，采用了STM32定时器外设的输出比较模式来控制输出脉冲数量。输出脉冲频率恒定为**1Khz**，占空比**50%**。

## **2. 使用方法**
按下文引脚定义接好线后打开电源，初始状态下输出脉冲为0，电机静止。  
每按一次Key 0，则输出脉冲数量增加**500**并开始输出。如：按一下Key 0，会输出500个脉冲；按第二下Key 0，会输出1000个脉冲（不包含前面的500个）。  
每按一次Key 1，则方向控制脚的电平会翻转，**同时将输出脉冲清零**，从头开始计算。此时再按Key 0，电机应该反向运动。

## **3. 硬件资源**
a. 正点原子阿波罗F767开发板（**STM32F767IGT6**）  
b. 脉冲驱动式步进电机驱动器

## **4. 引脚定义**
**PA4** -- 电机使能控制脚，接驱动器的ENA脚  
**PA5** -- 电机方向脚，接驱动器的DIR脚  
**PA6** -- 脉冲输出脚，接驱动器的PUL脚  
**PH2** -- 按键Key 1，控制电机反向及清零脉冲  
**PH3** -- 按键Key 0，控制脉冲个数  
